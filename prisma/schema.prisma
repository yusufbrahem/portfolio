generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
}

model SkillGroup {
  id        String   @id @default(uuid())
  name      String
  order     Int      @default(0)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  skills    Skill[]

  @@index([order])
}

model Skill {
  id           String     @id @default(uuid())
  skillGroupId String
  name         String
  order        Int        @default(0)
  createdAt    DateTime   @default(now())
  updatedAt    DateTime   @updatedAt
  skillGroup   SkillGroup @relation(fields: [skillGroupId], references: [id], onDelete: Cascade)

  @@index([skillGroupId, order])
}

model Experience {
  id        String             @id @default(uuid())
  title     String
  company   String
  location  String
  period    String
  order     Int                @default(0)
  createdAt DateTime           @default(now())
  updatedAt DateTime           @updatedAt
  bullets   ExperienceBullet[]
  tech      ExperienceTech[]

  @@index([order])
}

model ExperienceBullet {
  id           String     @id @default(uuid())
  experienceId String
  text         String
  order        Int        @default(0)
  createdAt    DateTime   @default(now())
  experience   Experience @relation(fields: [experienceId], references: [id], onDelete: Cascade)

  @@index([experienceId, order])
}

model ExperienceTech {
  id           String     @id @default(uuid())
  experienceId String
  name         String
  order        Int        @default(0)
  createdAt    DateTime   @default(now())
  experience   Experience @relation(fields: [experienceId], references: [id], onDelete: Cascade)

  @@index([experienceId, order])
}

model Project {
  id        String          @id @default(uuid())
  title     String
  summary   String
  order     Int             @default(0)
  createdAt DateTime        @default(now())
  updatedAt DateTime        @updatedAt
  bullets   ProjectBullet[]
  tags      ProjectTag[]

  @@index([order])
}

model ProjectBullet {
  id        String   @id @default(uuid())
  projectId String
  text      String
  order     Int      @default(0)
  createdAt DateTime @default(now())
  project   Project  @relation(fields: [projectId], references: [id], onDelete: Cascade)

  @@index([projectId, order])
}

model ProjectTag {
  id        String   @id @default(uuid())
  projectId String
  name      String
  order     Int      @default(0)
  createdAt DateTime @default(now())
  project   Project  @relation(fields: [projectId], references: [id], onDelete: Cascade)

  @@index([projectId, order])
}

model AboutContent {
  id         String           @id @default(uuid())
  title      String
  paragraphs String
  createdAt  DateTime         @default(now())
  updatedAt  DateTime         @updatedAt
  principles AboutPrinciple[]
}

model AboutPrinciple {
  id             String       @id @default(uuid())
  aboutContentId String
  title          String
  description    String
  order          Int          @default(0)
  createdAt      DateTime     @default(now())
  aboutContent   AboutContent @relation(fields: [aboutContentId], references: [id], onDelete: Cascade)

  @@index([aboutContentId, order])
}

model PersonInfo {
  id        String   @id @default(uuid())
  name      String
  role      String
  location  String
  email     String
  linkedIn  String
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  cvUrl     String?
}

model HeroContent {
  id          String   @id @default(uuid())
  headline    String
  subheadline String
  highlights  String
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}

model ArchitectureContent {
  id        String               @id @default(uuid())
  createdAt DateTime             @default(now())
  updatedAt DateTime             @updatedAt
  pillars   ArchitecturePillar[]
}

model ArchitecturePillar {
  id                    String              @id @default(uuid())
  architectureContentId String
  title                 String
  order                 Int                 @default(0)
  createdAt             DateTime            @default(now())
  architectureContent   ArchitectureContent @relation(fields: [architectureContentId], references: [id], onDelete: Cascade)
  points                ArchitecturePoint[]

  @@index([architectureContentId, order])
}

model ArchitecturePoint {
  id                   String             @id @default(uuid())
  architecturePillarId String
  text                 String
  order                Int                @default(0)
  createdAt            DateTime           @default(now())
  architecturePillar   ArchitecturePillar @relation(fields: [architecturePillarId], references: [id], onDelete: Cascade)

  @@index([architecturePillarId, order])
}

model AdminUser {
  id           String   @id @default(uuid())
  email        String   @unique
  passwordHash String   // bcrypt hashed password
  name         String?  // Optional display name
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt
}
